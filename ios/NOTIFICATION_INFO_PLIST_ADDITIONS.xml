<!--
  Add these entries to ios/Runner/Info.plist
  for Firebase Push Notifications support
-->

<!-- ============================================ -->
<!-- FIREBASE CONFIGURATION -->
<!-- ============================================ -->
<!--
Add before closing </dict> tag in Info.plist
-->

<!-- Disable Firebase swizzling to handle notifications manually -->
<key>FirebaseAppDelegateProxyEnabled</key>
<false/>

<!-- ============================================ -->
<!-- NOTIFICATION PERMISSIONS -->
<!-- ============================================ -->

<!-- Background modes already configured in Xcode (not in Info.plist) -->
<!--
To enable background modes:
1. Open ios/Runner.xcworkspace in Xcode
2. Select Runner target
3. Go to "Signing & Capabilities" tab
4. Click "+ Capability"
5. Add "Background Modes"
6. Check:
   - Remote notifications
   - Background fetch
-->

<!-- ============================================ -->
<!-- EXAMPLE: Complete Info.plist Structure -->
<!-- ============================================ -->
<!--
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDevelopmentRegion</key>
    <string>$(DEVELOPMENT_LANGUAGE)</string>

    <key>CFBundleDisplayName</key>
    <string>JoonaPay</string>

    <key>CFBundleExecutable</key>
    <string>$(EXECUTABLE_NAME)</string>

    <key>CFBundleIdentifier</key>
    <string>$(PRODUCT_BUNDLE_IDENTIFIER)</string>

    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>

    <key>CFBundleName</key>
    <string>usdc_wallet</string>

    <key>CFBundlePackageType</key>
    <string>APPL</string>

    <key>CFBundleShortVersionString</key>
    <string>$(FLUTTER_BUILD_NAME)</string>

    <key>CFBundleSignature</key>
    <string>????</string>

    <key>CFBundleVersion</key>
    <string>$(FLUTTER_BUILD_NUMBER)</string>

    <key>LSRequiresIPhoneOS</key>
    <true/>

    <key>UILaunchStoryboardName</key>
    <string>LaunchScreen</string>

    <key>UIMainStoryboardFile</key>
    <string>Main</string>

    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
        <string>UIInterfaceOrientationLandscapeLeft</string>
        <string>UIInterfaceOrientationLandscapeRight</string>
    </array>

    <key>UISupportedInterfaceOrientations~ipad</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
        <string>UIInterfaceOrientationPortraitUpsideDown</string>
        <string>UIInterfaceOrientationLandscapeLeft</string>
        <string>UIInterfaceOrientationLandscapeRight</string>
    </array>

    <key>UIViewControllerBasedStatusBarAppearance</key>
    <false/>

    <key>CADisableMinimumFrameDurationOnPhone</key>
    <true/>

    <key>UIApplicationSupportsIndirectInputEvents</key>
    <true/>

    <!-- Firebase Configuration -->
    <key>FirebaseAppDelegateProxyEnabled</key>
    <false/>

    <!-- Notification Permissions -->
    <key>NSUserNotificationsUsageDescription</key>
    <string>We need permission to send you important updates about your transactions and account security.</string>
</dict>
</plist>
-->

<!-- ============================================ -->
<!-- PERMISSIONS USAGE DESCRIPTION -->
<!-- ============================================ -->

<!-- Optional: Add user-facing description (iOS shows generic message by default) -->
<key>NSUserNotificationsUsageDescription</key>
<string>We need permission to send you important updates about your transactions and account security.</string>

<!-- ============================================ -->
<!-- PUSH NOTIFICATION ENTITLEMENTS -->
<!-- ============================================ -->
<!--
Xcode automatically manages entitlements when you add the Push Notifications capability.
File location: ios/Runner/Runner.entitlements

Example Runner.entitlements:
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>aps-environment</key>
    <string>development</string>
</dict>
</plist>

For production:
<key>aps-environment</key>
<string>production</string>
-->

<!-- ============================================ -->
<!-- NOTIFICATION SOUNDS -->
<!-- ============================================ -->
<!--
To add custom notification sounds:

1. Create .wav files (< 30 seconds, 22kHz sample rate recommended)
2. Add to ios/Runner/Assets/ folder
3. Register in Xcode:
   - Open ios/Runner.xcworkspace
   - Right-click Runner folder â†’ Add Files to "Runner"
   - Select your .wav files
   - Ensure "Copy items if needed" is checked
   - Target membership: Runner

4. Use in notification payload:
{
  "apns": {
    "payload": {
      "aps": {
        "sound": "custom_sound.wav"
      }
    }
  }
}
-->

<!-- ============================================ -->
<!-- TROUBLESHOOTING -->
<!-- ============================================ -->
<!--
Common Issues:

1. Notifications not appearing:
   - Push notifications don't work on iOS Simulator, use real device
   - Check APNs Auth Key uploaded to Firebase
   - Verify Bundle ID matches Firebase console
   - Check provisioning profile includes Push Notifications
   - Ensure app is not in Do Not Disturb mode

2. Permission not requesting:
   - Check FirebaseAppDelegateProxyEnabled is false
   - Verify initialize() is called in app startup
   - Permission can only be requested once per install

3. Background notifications not working:
   - Verify "Remote notifications" enabled in Background Modes
   - Check content-available: 1 in notification payload
   - Ensure app has background refresh enabled in Settings

4. Token not registering:
   - Check network connectivity
   - Verify backend endpoint is correct
   - Check authentication token is valid
   - Review console logs for errors

5. Deep links not working:
   - Verify routes exist in app_router.dart
   - Check notification_navigation_handler.dart
   - Test with app in background (not terminated)
-->
